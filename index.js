const express = require('express');const { createTransaction } = require('./transbank');const pagos = require('./pagos.json');const app = express();const PORT = process.env.PORT || 3000;// ✅ URL fija de tu app desplegada en Renderconst BASE_URL = "https://integracion-transbank.onrender.com";app.get('/pago', async (req, res) => {  const id = req.query.id;  if (!id || !pagos[id]) {    return res.status(404).send('Pago no encontrado');  }  const { buyOrder, sessionId, amount } = pagos[id];  const returnUrl = `${BASE_URL}/retorno?id=${id}`;  try {    const { url, token } = await createTransaction({      buyOrder,      sessionId,      amount,      returnUrl    });    res.send(`      <html>        <body onload="document.forms[0].submit()">          <form action="${url}" method="POST">            <input type="hidden" name="token_ws" value="${token}" />          </form>        </body>      </html>    `);  } catch (error) {    console.error('Error creando transacción:', error);    res.status(500).send('Error en el servidor');  }});app.get('/retorno', (req, res) => {  res.send("¡Transacción finalizada! Aquí puedes mostrar el resultado final.");});app.listen(PORT, () => {  console.log(`Servidor escuchando en ${BASE_URL}`);});